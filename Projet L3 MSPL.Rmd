---
title: "Projet L3 MSPL"
author: "Blaste Mulamba, Basma, Hamza, Manyl"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(ggplot2)
data <- read_delim("./parcoursup.csv",delim=";")

# Récupération des colonnes
df <- data %>%
  select(
    cod_uai, contrat_etab,    g_ea_lib_vx,    region_etab_aff,    acad_mies,
    select_form,    fili,    form_lib_voe_acc,    fil_lib_voe_acc,    capa_fin,
    voe_tot,    voe_tot_f,    nb_voe_pp,    nb_voe_pp_bg,    nb_voe_pp_bt,
    nb_voe_pp_bp,    nb_voe_pp_at,   nb_voe_pc,    nb_voe_pc_bg,    nb_voe_pc_bt,
    nb_voe_pc_bp,    nb_voe_pc_at,    prop_tot,    acc_tot,    pct_f
  )
# Renommage des colonnes
colnames(df) <- c(
    "id",
    "statut",
    "nom établissement",
    "région",
    "ville",
    "selectivité",
    "diplôme",
    "filière",
    "nom de la formation",
    "capacité accueil",
    "candidatures",
    "candidatures filles",
    "candidatures phase principale",
    "candidatures phase pr bac gen",
    "candidatures phase pr bac tech",
    "candidatures phase pr bac pro",
    "candidatures phase pr bac autres spé",
    "candidatures phase complémentaire",
    "candidatures phase comp gen",
    "candidatures phase comp tech",
    "candidatures phase comp pro",
    "candidatures phase comp bac autres spé",
    "candidatures préselectionnés",
    "candidatures admis",
    "pourcentage filles admises"
)



# data %>% head(10) # Shows the 10 first lines of this data set
# candidatures <- df %>%
#  group_by(région) %>%
 # summarise(candidats_total = sum(candidats), candidats_admis = sum(`candidats admis`))%>%
  #          arrange(desc(candidats_total))

#pourcentage_admission <- candidatures %>%
 # mutate(pourcentage = candidats_admis / candidats_total * 100)


#candidatures_par_region <- df %>%
 # group_by(région) %>%
  #summarise(candidats_total = sum(candidats))%>%
   #         arrange(desc(candidats_total))

#admissions_par_region <- df %>%
 # group_by(région) %>%
  # summarise(candidats_admis = sum(`candidats admis`))%>%
    #        arrange(desc(candidats_admis))


#merged_data <- merge(candidatures_par_region, admissions_par_region, by = "région")


# print(candidatures_par_region)
# print(admissions_par_region)
# print(pourcentage_admission)


# Graphique pour la répartition des candidatures par région
# ggplot(candidatures_par_region, aes(x = région, y = candidats_total)) +
  # geom_bar(stat = "identity", fill = "skyblue", alpha = 0.7) +
  # labs(title = "Répartition des candidatures par région",
   #    x = "Région",
    #   y = "Nombre de candidats") +
  # theme(axis.text.x = element_text(angle = 90, hjust = 1))

# Graphique pour la répartition des admissions par région
#ggplot(admissions_par_region, aes(x = région, y = candidats_admis)) +
 # geom_bar(stat = "identity", fill = "orange", alpha = 0.7) +
  #labs(title = "Répartition des admissions par région",
   #    x = "Région",
    #   y = "Nombre de candidats admis") +
  # theme(axis.text.x = element_text(angle = 90, hjust = 1))

# Graphique des admissions en fonction des candidatures
# ggplot(merged_data, aes(x = région)) +
  # geom_bar(aes(y = candidats_total), stat = "identity", fill = "skyblue", alpha = 0.7, position = "dodge") +
  # geom_bar(aes(y = candidats_admis), stat = "identity", fill = "orange", alpha = 0.7, position = "dodge") +
  # labs(title = "Répartition des candidatures et des admissions par région",
    #   x = "Région",
     #  y = "Nombre de candidatures/admissions") +
 # theme(axis.text.x = element_text(angle = 90, hjust = 1))

# Graphique pour la répartition des admissions par région
# ggplot(pourcentage_admission, aes(x = région, y = candidats_admis)) +
  # geom_bar(stat = "identity", fill = "orange", alpha = 0.7) +
  # labs(title = "Répartition des admissions par région",
    #   x = "Région",
     #  y = "Nombre de candidats admis") +
 # theme(axis.text.x = element_text(angle = 90, hjust = 1))


```